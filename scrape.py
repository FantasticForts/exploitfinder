import json
import requests
from bs4 import BeautifulSoup
from flask import Flask

app = Flask(__name__)

"""
    Server set up
    Frontend to call it, display it
    Filtering
"""

# Fetch the content from the URL
url = "https://docs.metasploit.com/docs/modules.html"
response = requests.get(url)

# Parse the content with BeautifulSoup
soup = BeautifulSoup(response.content, "html.parser")

# Find all <a> tags
target_links = soup.find_all("a")

# Array to hold the printed content
exploit_links = []

# Filter and process <a> tags where the href contains the word "exploit"
for link in target_links:
    content = link.string
    if content and "exploit/" in content:  # Check if href exists and contains "exploit"
        exploit_links.append(content)  # Append the text inside the <div> to the list

@app.route("/")
def display_exploits():
    return json.dumps(exploit_links)

if __name__ == "__main__":
    app.run(debug=True, host="0.0.0.0", port=8080)
